#Script for base64 encode/decode

import base64
import sys
import os

if len(sys.argv) < 3:
    print("Usage: python encode_decode_sql.py <encode/decode> <input_file>")
    sys.exit()


action = sys.argv[1]
input_file = sys.argv[2]


filename = os.path.splitext(os.path.basename(input_file))[0]

if action == "encode":
  
    with open(input_file, 'rb') as f:
        sql_content = f.read()

    encoded_sql_content = base64.b64encode(sql_content)
    output_file = f"{filename}_encoded.txt"
    with open(output_file, 'wb') as f:
        f.write(encoded_sql_content)
    print(f"Generated encoded content in file {output_file}")

elif action == "decode":

    with open(input_file, 'rb') as f:
        encoded_sql_content = f.read()


    decoded_sql_content = base64.b64decode(encoded_sql_content)

    output_file = f"{filename}_decoded.txt"
    with open(output_file, 'wb') as f:
        f.write(decoded_sql_content)
    print(f"Generated decoded content in file {output_file}")

else:
    print("Invalid action specified. Allowed values are 'encode' and 'decode'")
    sys.exit()
